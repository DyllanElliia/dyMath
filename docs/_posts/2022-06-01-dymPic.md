---
title: DyPicture 图像模块
author: DyllanElliia
date: 2022-06-01
category: Jekyll
layout: post
---

相比于传统图像存储，dySim使用`Tensor`存储，注意，必须是二维`Tensor`，否则接受这个`Tensor`的图像处理函数会返回一个错误。

> 存储结构上，`Tensor`的访问$(x,y)$和传统图像存储的一致，但由于可以使用索引访问，因此访问便捷性更高。


## imread/imwrite 图像读写

这个案例读取了一张图片，然后把它写入另一个文件夹中。`ret`是函数`imwrite`的写入结果，类型是`bool`。

~~~cpp
#include <dyPicture.hpp>

int main() {
  dym::TimeLog T;
  auto pic = dym::imread<int, dym::PIC_RGB>("./image/uestc.jpg");

  auto ret = dym::imwrite(pic, "./image_out/newPic.jpg");
  qprint(dym::pi(pic.shape()), ret);

  return 0;
}
~~~

## 像素访问

这个操作使图像中一个矩形区域的亮度提高50。

~~~cpp
#include <dyPicture.hpp>

int main() {
  dym::TimeLog T;
  auto pic = dym::imread<int, dym::PIC_RGB>("./image/uestc.jpg");

  // -----new-----
  for (int i = 100; i < 200; ++i)
    for (int j = 100; j < 200; ++j) pic[dym::gi(i, j)] += 50;
  // -------------

  auto ret = dym::imwrite(pic, "./image_out/newPic.jpg");
  qprint(dym::pi(pic.shape()), ret);
  return 0;
}
~~~

它的结果如下所示：

## 写一个滤波试试

## 画一些点